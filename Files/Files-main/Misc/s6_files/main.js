$(document).ready(function(){$(".fade, .popupShadow").css({opacity:0.7}).click(function(){$(this).hide()});$(window).scroll(function(){$(".popupWrap, .popupShadow").css("top",$(this).scrollTop()+"px")});$("#popupClose").click(function(){$(".popupWrap, .popupShadow").hide()});$(".warningMsgClose").click(function(){$(this).closest(".warningMsg").slideUp(function(){document.cookie="hiddenWarningMsgId"+$(this).attr("id")+"=true; path=/; expires=Mon, 01-Fri-2100 00:00:00 GMT"})});var a;var f=$("#mainSearchList");var e="";var c=function(m){$(".listC",f).empty();var g=$("#search").val();if(g.length<3){f.hide();return 0}var k=new RegExp(g,"ig");var l=0;for(var j=0;j<m.sort(b).length;j++){var h=m[j];if(h.hint.search(k)>-1){l++;$(".listC",f).append('<a href="#" data="'+h.hint+'">'+h.hint.replace(k,"<b>$&</b>")+"</a>")}}if(l>0){f.show()}else{f.hide()}return l};var b=function(h,g){if(h.requestCount>g.requestCount){return -1}else{if(h.requestCount<g.requestCount){return 1}else{return 0}}};var d=function(){$("#mainSearchList").hide();
setTimeout(function(){$("#shadowWrap").height($(document).height()).show()},200);$("#searchForm").submit()};$("#doSearchButton").click(function(){d()});$("#searchForm").submit(function(g){if($("#mainSearchList").is(":visible")){g.preventDefault()}});$("#search").keyup(function(j){if(j.keyCode==27){$(".listC",f).empty();f.hide()}else{if(j.keyCode==40&&f.is(":visible")){var i=$("a.selected",f).next();if($(i).length==0){i=$("a",f).first()}$("a",f).removeClass("selected").filter(i).addClass("selected")}else{if(j.keyCode==38&&f.is(":visible")){var i=$("a.selected",f).prev();if($(i).length==0){i=$("a",f).first()}$("a",f).removeClass("selected").filter(i).addClass("selected")}else{if(j.keyCode==13&&f.is(":visible")){var i=$("a.selected",f);if($(i).length>0){$(this).val($(i).attr("data"))}d()}else{var g=$(this).val();if(g.length<3){f.hide();return false}var h=new RegExp(g,"ig");if(j.keyCode!=13&&g!=e){if(a){clearTimeout(a)}a=setTimeout(function(){$.getJSON($("#suggJSONUrl").val(),{request:g,resultCount:5},function(k){e=g;
c(k.suggests)})},200)}}}}}});$("a",f).live("click",function(){$("#search").val($(this).attr("data"));f.hide()});$(".search .list a").live("hover",function(){$("a",$(this).parent()).removeClass("selected");$(this).addClass("selected")});$(document).click(function(g){if($(".search .list").is(":visible")){$(".search .list").hide()}})});if(typeof console!="object"){console={log:function(){}}}(function(){var b={};this.tmpl=function a(e,d){var c=!/\W/.test(e)?b[e]=b[e]||a(document.getElementById(e).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return d?c(d):c}})();